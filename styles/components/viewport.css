@import '../theme.css';

/*
 * Viewport Container
 * Acts as the "desktop" boundary for floating ApplicationWindows.
 * Stacks the TabBar slot and Content area vertically.
 */
.viewport {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    flex-grow: 1;
    overflow: hidden;
    border-radius: var(--border-radius-base);
    background-color: var(--color-bg-viewport);

    /* Ensures that clicks on the empty background don't select text elsewhere */
    user-select: none;
}

/*
 * Tab Bar Slot
 * Hosts the TabStrip component. We override generic strip variables here
 * to give document tabs a distinct look (e.g., larger headers).
 */
.viewport__tab-bar-slot {
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    background-color: var(--color-bg-header);
    border-bottom: 1px solid var(--color-border-default);

    /* Override TabStrip variables for Viewport context */
    --tab-strip-bg: transparent;
    --tab-strip-height: var(--window-header-height);
    --tab-scroll-btn-width: 24px;
    --tab-scroll-btn-bg: transparent;
    --tab-scroll-btn-hover-bg: rgba(255, 255, 255, 0.1);
}

/* State to hide tabs when no windows are docked */
.viewport--tabs-hidden .viewport__tab-bar-slot {
    display: none;
}

/* Drop target visual feedback */
.viewport__tab-bar-slot[data-dropzone] {
    transition: background-color 0.2s;
}

.viewport__tab-bar--drag-target {
    background-color: var(--color-bg-hover);
    box-shadow: inset 0 0 4px var(--color-accent-hover);
}

/* * Content Area
 * Where floating windows live, and where docked windows fill space.
 */
.viewport__content {
    flex-grow: 1;
    position: relative;
    overflow: hidden;
    /* Establishes a stacking context for windows */
    z-index: var(--viewport-z-base);
}

/* Utility: Fill Space */
.viewport--fills-space {
    flex: 1 1 auto !important;
    height: auto !important;
}

/*
 * Tabbed Window Behavior (Docked)
 * When a window is docked, it must stop floating and fill the viewport content.
 * These styles override the default floating styles of ApplicationWindow.
 */
.viewport .application-window--tabbed {
    position: relative !important; /* Override absolute */
    flex: 1 1 auto;
    width: 100% !important;
    height: 100% !important;

    top: auto !important;
    left: auto !important;
    transform: none !important;

    border-radius: 0 !important;
    border: none !important;
    box-shadow: none !important;
    z-index: auto !important;

    display: none; /* Hidden by default, shown if active */
}

/* Only the active tabbed window is visible */
.viewport .application-window--tabbed.application-window--active-tab {
    display: flex;
}

/* * Custom Styling for Tab Items inside Viewport
 * These leverage the generic classes added by WindowHeaderWrapper or TabStrip logic
 * if we want specific styling for window headers inside the strip.
 * Currently, WindowHeaderWrapper renders the ApplicationWindowHeader element directly.
 */
.viewport__tab-bar-slot .window-header {
    border-bottom: none;
    border-top: 2px solid transparent; /* Indicator line */
    background-color: transparent;
    cursor: pointer;
    height: 100%;
    border-radius: 0;
    min-width: 120px;
    max-width: 200px;
}

.viewport__tab-bar-slot .window-header:hover {
    background-color: var(--color-bg-hover);
}

/* Active state managed by TabStrip adding classes or us relying on Wrapper logic */
.ui-strip__item--active .window-header {
    background-color: var(--color-bg-tab-active);
    color: var(--color-text-primary);
    border-top-color: var(--color-accent-primary);
}
